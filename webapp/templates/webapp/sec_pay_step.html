{% extends 'webapp/base.html' %}

{% block 'title' %}
    –í—Ç–æ—Ä–æ–π —à–∞–≥ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
{% endblock %}

{% block 'body' %}
<div class="row">
    <h4 class="fw-bold py-3 mb-1"><span class="text-muted fw-light">–ë–∞–ª–∞–Ω—Å /</span> –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã</h4>

    <div class="col-xl-6 my-form-border">
        <div class="card mb-4 my-form-area">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">üí≥ <strong>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</strong>
                    {% if pay_method == 'to_card' %}
                    <code>–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É</code>
                    {% endif %}
                </li>
                <li class="list-group-item">üíµ <strong>–°—É–º–º–∞:</strong> <code>{{ amount }}</code> ‚ÇΩ</li>
                <li class="list-group-item">üßæ <strong>–î–∞–Ω–Ω—ã–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã:</strong> <code>{{ to_card_pay_data }}</code></li>
            </ul>
        </div>
    </div>

    <div class="col-xl-6 my-form-border">
        <div class="card mb-1 my-form-area">
            <form id="interestsForm" action="{% url 'webapp:sec_pay_step' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}

                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                <input type="hidden" name="bill_hash" value="{{ bill_hash }}">
                <div class="row">
                    <div class="col-12 my-form-border">
                        <div class="card my-form-area">
                            <h5 class="card-header">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ —á–µ–∫</h5>
                            <div class="card-body demo-vertical-spacing demo-only-element">
                                <small class="text-light fw-semibold">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ —á–µ–∫ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"</small>
                                <div class="input-group">
                                    <input type="file" name="bill_file" class="form-control my-filling-fields" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
                                </div>
                                <div class="input-group">
                                    <button class="btn rounded-pill btn-info btn-outline-primary my-btn-clr" type="submit" id="inputFileButton">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç —Ç–µ–ª–µ–≥–∏-->
<script>
  var tgObject = window.Telegram.WebApp;
  tgObject.enableClosingConfirmation()  // –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ WebApp
</script>

<!--—Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –Ω–µ–π-->
<script>
  let inputFileButton = document.getElementById('inputFileButton'); // –ë–µ—Ä–µ–º –∫–Ω–æ–ø–∫—É
  let applicationForm = document.getElementById('interestsForm'); // –ë–µ—Ä–µ–º —Ñ–æ—Ä–º—É
  let inputFileField = document.getElementById('inputGroupFile04'); // –ë–µ—Ä–µ–º input –¥–ª—è —Ñ–∞–π–ª–∞
  inputFileButton.addEventListener('click', function() {
      inputFileButton.setAttribute("disabled", "disabled");     // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É
      // inputFileField.setAttribute("type", "hidden");  // –û—Ç–∫–ª—é—á–∞–µ–º input –¥–ª—è —Ñ–∞–π–ª–∞
      inputFileButton.textContent = '‚åõÔ∏è –û—Ç–ø—Ä–∞–≤–ª—è—é —Ñ–∞–π–ª...';     // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
      applicationForm.submit();     // –®–≤—ã—Ä—è–µ–º —Ñ–æ—Ä–º—É –Ω–∞ –±—ç–∫
  });
</script>

{% endblock %}
