{% extends 'webapp/base.html' %}

{% block 'title' %}
    –ú–æ–∏ –≥—Ä—É–ø–ø—ã
{% endblock %}

{% block 'body' %}
<div class="row">
    <h4 class="fw-bold py-3 mb-1"><span class="text-muted fw-light">–ú–æ–∏ –≥—Ä—É–ø–ø—ã /</span> –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø</h4>

    <div class="col-xl-6 my-form-border">
        <div class="card mb-4 my-form-area">
            <div class="card my-form-area">
                <h5 class="card-header">–°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤</h5>
                <div class="table-responsive text-nowrap">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–í —Ä–∞–±–æ—Ç–µ</th>
                            </tr>
                        </thead>
                        {% for i_group in groups %}
                            <tbody class="table-border-bottom-0">
                                <tr>
                                    <td>
                                        <a href="{% url 'webapp:group_detail' group_id=i_group.id%}"><i class="fab fa-angular fa-lg text-danger me-0"></i><strong>{{ i_group.name }}</strong></a>
                                    </td>
                                    <td>
                                        {% if i_group.in_work %}
                                            <span class="badge bg-label-success me-0">‚úîÔ∏è</span>
                                        {% else %}
                                            <span class="badge bg-label-danger me-0">‚úñÔ∏è</span>
                                        {% endif %}
                                    </td>
                                </tr>
                            </tbody>
                        {% empty %}
                            <div class="divider divider-info divider-dotted">
                                <div class="divider-text">
                                    <p class="text-muted mb-0">ü§∑‚Äç‚ôÇÔ∏è –ü–æ–∫–∞ —á—Ç–æ –≥—Ä—É–ø–ø –Ω–µ—Ç...</p>
                                </div>
                            </div>
                        {% endfor %}
                    </table>
                </div>
              </div>
        </div>
    </div>

    <div class="col-xl-6 my-form-border">
        <div class="card mb-1 my-form-area">
            <form id="interestsForm" action="{% url 'webapp:sec_pay_step' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}

                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                <input type="hidden" name="bill_hash" value="{{ bill_hash }}">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <h5 class="card-header">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–π –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç</h5>
                            <div class="card-body demo-vertical-spacing demo-only-element">
                                <small class="text-light fw-semibold">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∏–∂–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–∫–ª—é—á–∏—Ç—å".</small>
                                <p><small class="text-light fw-semibold"><mark>‚ùóÔ∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –í–∞—à —á–∞—Ç –∏ –∏–º–µ–µ—Ç –≤—Å–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∞.</mark></small></p>

                                <hr>

                                <div class="mb-3">
                                    <label class="form-label" for="group_chat_data">
                                        –î–∞–Ω–Ω—ã–µ –æ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ:
                                    </label>
                                    <div class="input-group" id="group_chat_data">
                                        <input type="text" name="group_name" class="form-control my-filling-fields" placeholder="–Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" aria-label="–Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" required>
                                        <input type="url" name="group_link" class="form-control my-filling-fields" placeholder="https://t.me/+MyChatHash123" aria-label="—Å—Å—ã–ª–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø—É" required>
                                    </div>
                                    <div class="form-text">–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞ –∏ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É</div>
                                </div>

                                <hr>

                                <div class="flex-grow-1 row">
                                    <div class="col-9 mb-sm-0 mb-0">
                                        <label class="form-label" for="tag_now">
                                            –¢–µ–≥–∞—Ç—å —Å—Ä–∞–∑—É ?
                                        </label>
                                    </div>
                                    <div class="col-3 text-end">
                                        <div class="form-check form-switch">
                                            <input name="tag_now" id="tag_now" class="form-check-input float-end" type="checkbox" role="switch" checked>
                                        </div>
                                    </div>
                                    <div class="col-auto form-text">
                                        –ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å—Ç—É–ø–∏—Ç –≤ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ä–µ–∫–ª–∞–º–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º.<br>–ù–∞–ø—Ä–∏–º–µ—Ä: @NewUser –í–æ—Ç —Ç–µ–±–µ —Ä–µ–∫–ª–∞–º–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
                                    </div>
                                </div>

                                <hr>

                                <div class="mb-3">
                                    <label class="form-label" for="main_content">
                                        –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
                                    </label>
                                    <div class="input-group input-group-merge" id="main_content">
                                        <textarea class="form-control my-filling-fields" aria-label="With textarea" placeholder="–£–∫–∞–∂–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è" required></textarea>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <input type="file" name="group_chat_file" class="form-control my-filling-fields" aria-describedby="inputGroupFileAddon04" aria-label="Upload" multiple>
                                    <div class="col-auto form-text">
                                        –£–∫–∞–∂–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–≤–∏–¥—è—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–µ –≤ —á–∞—Ç —é–∑–µ—Ä—ã. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.
                                    </div>
                                </div>

                                <hr>

                                <div class="mb-3">
                                    <div class="input-group">
                                        <button class="btn rounded-pill btn-info btn-outline-primary my-btn-clr" type="submit" id="inputFileButton">–ü–æ–¥–∫–ª—é—á–∏—Ç—å</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Ç —Ç–µ–ª–µ–≥–∏-->
<script>
  var tgObject = window.Telegram.WebApp;
  tgObject.enableClosingConfirmation()  // –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ WebApp
</script>

<!--—Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –Ω–µ–π-->
<script>
  let inputFileButton = document.getElementById('inputFileButton'); // –ë–µ—Ä–µ–º –∫–Ω–æ–ø–∫—É
  let applicationForm = document.getElementById('interestsForm'); // –ë–µ—Ä–µ–º —Ñ–æ—Ä–º—É
  let inputFileField = document.getElementById('inputGroupFile04'); // –ë–µ—Ä–µ–º input –¥–ª—è —Ñ–∞–π–ª–∞
  inputFileButton.addEventListener('click', function() {
      inputFileButton.setAttribute("disabled", "disabled");     // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É
      // inputFileField.setAttribute("type", "hidden");  // –û—Ç–∫–ª—é—á–∞–µ–º input –¥–ª—è —Ñ–∞–π–ª–∞
      inputFileButton.textContent = '‚åõÔ∏è –û—Ç–ø—Ä–∞–≤–ª—è—é —Ñ–∞–π–ª...';     // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
      applicationForm.submit();     // –®–≤—ã—Ä—è–µ–º —Ñ–æ—Ä–º—É –Ω–∞ –±—ç–∫
  });
</script>

{% endblock %}
